"use strict";(self["webpackChunkprojetwebmagnus"]=self["webpackChunkprojetwebmagnus"]||[]).push([[808],{5489:function(e,r,t){t.d(r,{Z:function(){return l}});var s=t(9669),u=t.n(s),a=u().create({baseURL:"https://projet-web-magnus.herokuapp.com/",headers:{"Content-type":"application/json"}});class n{getAll(e){return a.get("/user",{params:{userCity:e}})}getAllCA(){return a.get("/user/CA")}getAllMembers(){return a.get("/user/members")}get(e){return a.get(`/user/${e}`)}create(e){return a.post("/user",e)}update(e,r){return a.put(`/user/${e}`,r)}delete(e){return a["delete"](`/user/${e}`)}}var l=new n},4808:function(e,r,t){t.r(r),t.d(r,{default:function(){return S}});var s=t(6252),u=t(9963),a=t(3577);const n={key:0,class:"edit-form"},l=(0,s._)("h4",null,"User",-1),o={class:"form-group"},i=(0,s._)("label",{for:"userLastName"},"Nom",-1),c={class:"form-group"},m=(0,s._)("label",{for:"userFirstName"},"Prénom",-1),d={class:"form-group"},p=(0,s._)("label",{for:"userEmail"},"Mail",-1),g={class:"form-group"},b=(0,s._)("label",{for:"userCity"},"Ville",-1),U={class:"form-group"},h=(0,s._)("label",{for:"phoneNumber"},"Numéro de téléphone",-1),C={class:"form-group"},_=(0,s._)("label",null,[(0,s._)("strong",null,"Membre du CA:")],-1),f={class:"form-group"},y=(0,s._)("label",null,[(0,s._)("strong",null,"Est membre:")],-1),v={key:1},w=(0,s._)("br",null,null,-1),k=(0,s._)("p",null,"Cliquez sur un utilisateur...",-1),A=[w,k];function N(e,r,t,w,k,N){return k.currentUser?((0,s.wg)(),(0,s.iD)("div",n,[l,(0,s._)("form",null,[(0,s._)("div",o,[i,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"userLastName","onUpdate:modelValue":r[0]||(r[0]=e=>k.currentUser.userLastName=e)},null,512),[[u.nr,k.currentUser.userLastName]])]),(0,s._)("div",c,[m,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"userFirstName","onUpdate:modelValue":r[1]||(r[1]=e=>k.currentUser.userFirstName=e)},null,512),[[u.nr,k.currentUser.userFirstName]])]),(0,s._)("div",d,[p,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"userEmail","onUpdate:modelValue":r[2]||(r[2]=e=>k.currentUser.userEmail=e)},null,512),[[u.nr,k.currentUser.userEmail]])]),(0,s._)("div",g,[b,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"userCity","onUpdate:modelValue":r[3]||(r[3]=e=>k.currentUser.userCity=e)},null,512),[[u.nr,k.currentUser.userCity]])]),(0,s._)("div",U,[h,(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",id:"phoneNumber","onUpdate:modelValue":r[4]||(r[4]=e=>k.currentUser.phoneNumber=e)},null,512),[[u.nr,k.currentUser.phoneNumber]])]),(0,s._)("div",C,[_,(0,s.Uk)(" "+(0,a.zw)(k.currentUser.isCA?"Oui":"Non"),1)]),(0,s._)("div",f,[y,(0,s.Uk)(" "+(0,a.zw)(k.currentUser.isMember?"Oui":"Non"),1)])]),k.currentUser.isCA?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"badge badge-primary mr-2",onClick:r[5]||(r[5]=e=>N.updateCAStatus(!1))}," Enlever du CA ")):((0,s.wg)(),(0,s.iD)("button",{key:1,class:"badge badge-primary mr-2",onClick:r[6]||(r[6]=e=>N.updateCAStatus(!0))}," Mettre au CA ")),k.currentUser.isMember?((0,s.wg)(),(0,s.iD)("button",{key:2,class:"badge badge-primary mr-2",onClick:r[7]||(r[7]=e=>N.updateMemberStatus(!1))}," Enlever des membres ")):((0,s.wg)(),(0,s.iD)("button",{key:3,class:"badge badge-primary mr-2",onClick:r[8]||(r[8]=e=>N.updateMemberStatus(!0))}," Ajouter aux membres ")),(0,s._)("button",{class:"badge badge-danger mr-2",onClick:r[9]||(r[9]=(...e)=>N.deleteUser&&N.deleteUser(...e))}," Supprimer "),(0,s._)("button",{type:"submit",class:"badge badge-success",onClick:r[10]||(r[10]=(...e)=>N.updateUser&&N.updateUser(...e))}," Mettre à jour "),(0,s._)("p",null,(0,a.zw)(k.message),1)])):((0,s.wg)(),(0,s.iD)("div",v,A))}var M=t(5489),j={name:"user-data",data(){return{currentUser:null,message:""}},methods:{getUser(e){M.Z.get(e).then((e=>{this.currentUser=e.data,console.log(e.data)})).catch((e=>{console.log(e)}))},updateCAStatus(e){var r={id:this.currentUser.id,isCA:e};M.Z.update(this.currentUser.id,r).then((r=>{console.log(r.data),this.currentUser.isCA=e,this.message="Le statut de membre du CA a été mis à jour avec succès !"})).catch((e=>{console.log(e)}))},updateMemberStatus(e){var r={id:this.currentUser.id,isMember:e};M.Z.update(this.currentUser.id,r).then((r=>{console.log(r.data),this.currentUser.isMember=e,this.message="Le statut de membre a été mis à jour avec succès !"})).catch((e=>{console.log(e)}))},updateUser(){console.log(this.currentUser),console.log(this.currentUser.userFirstName),M.Z.update(this.currentUser.id,this.currentUser).then((e=>{console.log(e.data),this.message="L'utilisateur a été mis à jour avec succès !"})).catch((e=>{console.log(e)}))},deleteUser(){M.Z["delete"](this.currentUser.id).then((e=>{console.log(e.data),this.$router.push({name:"users"})})).catch((e=>{console.log(e)}))}},mounted(){this.message="",this.getUser(this.$route.params.id)}},L=t(3744);const E=(0,L.Z)(j,[["render",N]]);var S=E}}]);
//# sourceMappingURL=808.8da4cf5e.js.map